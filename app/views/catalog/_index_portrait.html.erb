<%# default partial to display solr document fields in catalog index view -%>

<dl class="document-metadata dl-horizontal dl-invert">
  <% collapse_id = document['id'].gsub("#", "") %>

  <% collapse_fields = [] %>
  <% index_fields(document).each do |field_name, field| -%>
      <% if should_render_index_field? document, field %>
          <% label = render_index_field_label document, field: field_name %>
          <% value = render_index_field_value document, field: field_name %>
          <% if value.present? and field.short_form %>
              <dt class="blacklight-<%= field_name.parameterize %>"><%= label %></dt>
              <dd class="blacklight-<%= field_name.parameterize %>"><%= value %></dd>
          <% elsif value.present?  %>
              <% collapse_fields << [label, value, field_name] %>
          <% end %>
      <% end -%>
  <% end -%>

  <div class="long_form_collapse collapse" id=<%= collapse_id %>>
    <% collapse_fields.each do |label, value, field_name| %>
        <dt class="blacklight-<%= field_name.parameterize %>"><%= label %></dt>
        <dd class="blacklight-<%= field_name.parameterize %>"><%= value %></dd>
    <% end %>
  </div>
  <% unless collapse_fields.empty? %>
      <a class="collapse-button" role="button" data-toggle="collapse" href="#<%= collapse_id %>" aria-expanded="false" aria-controls="<%= collapse_id %>" onclick="changeButtonLabel(this);">
        Vis mere
      </a>
  <% end %>

</dl>